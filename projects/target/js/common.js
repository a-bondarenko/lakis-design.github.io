$(function(){var n=new function(){this.dye=function(){var n=$(".b-header"),e=$("body").offset().top;$(window).scrollTop()>e?($(n).addClass("small"),$(".b-main-menu").addClass("small")):($(n).removeClass("small"),$(".b-main-menu").removeClass("small"))}},e=new function(){var n=this;this.toggleMenu=function(){$(".open-nav").toggleClass("open"),$(".b-main-menu").toggleClass("open"),$(".b-toggle-menu__open-ico, .b-toggle-menu__close-ico").toggleClass("hidden"),$("body").toggleClass("no-scroll"),$(".b-header").toggleClass("header-noscroll")},this.closeMenuAnywhere=function(e){function o(){return $(".b-main-menu").hasClass("open")}!$(e).closest(".b-primary-nav").length&&!$(e).closest(".b-toggle-menu").length&&o()&&n.toggleMenu()}},o=new function(){function n(n){var e=$(n).attr("data-open-popup");return $("body").find("."+e)}var e=this;this.openPopup=function(o){var i=n(o);e.closePopup(),$("body").addClass("no-scroll"),$(".b-header").addClass("header-noscroll"),$(i).removeClass("hidden"),$(i).addClass("show-popup")},this.closePopup=function(){$("body").removeClass("no-scroll"),$(".b-header").removeClass("header-noscroll"),$(".b-popup-wrapper").removeClass("show-popup"),$(".b-popup-wrapper").addClass("hidden")},this.closePopupAnywhere=function(n){function o(){return $(".b-popup-wrapper").hasClass("show-popup")}!$(n).closest(".b-popup").length&&!$(n).closest(".open-popup").length&&o()&&e.closePopup()}},i=new function(){var n=this;this.sendMassage=function(e){return $.ajax({type:"POST",url:"/mail.php",data:$(e).serialize()}).done(function(){n.showConfirm(e)}),!1},this.showConfirm=function(n){function e(){$(n).trigger("reset"),$(n).find(".b-form__fieldset").addClass("hide-form"),$(t).addClass("show-form-confirm")}function i(){$(n).closest(".b-popup").length&&o.closePopup(),$(t).removeClass("show-form-confirm"),$(n).find(".b-form__fieldset").removeClass("hide-form")}var t=$(n).find(".b-form__confirm");e(),setTimeout(function(){i()},1500)},this.validateForm=function(e){$(e).validate({rules:{phone:{number:!0}},errorPlacement:function(n,e){return!0},errorClass:"b-form__input--error",submitHandler:function(e){n.sendMassage(e)}})},this.validateInit=function(){$(".b-form").each(function(){var e=$(this);n.validateForm(e)})},this.togglePlaceholder=function(n){var e=$(n).attr("placeholder");$(n).attr("placeholder",""),$(n).focusout(function(){$(n).attr("placeholder",e)})}},t=new function(){this.init=function(){$(".b-slider").owlCarousel({autoPlay:5e3,slideSpeed:800,navigation:!0,pagination:!0,singleItem:!0,navigationText:['<span class="b-slider__navigation b-slider__navigation--prev"><i class="fa fa-angle-left" aria-hidden="true"></i></span>','<span class="b-slider__navigation b-slider__navigation--next"><i class="fa fa-angle-right" aria-hidden="true"></i></span>']}),$(".b-slider-offer").owlCarousel({autoPlay:5e3,slideSpeed:800,navigation:!1,pagination:!1,singleItem:!0})},this.paralax=function(){$(window).scrollTop()}},a=new function(){this.init=function(){$(".b-gallery__item").magnificPopup({type:"image",gallery:{enabled:!0}})}},s=new function(){this.init=function(){$(".magnefic-popup").magnificPopup({type:"image",gallery:{}})}},l=new function(){this.show=function(n){$(n).addClass("show")},this.hide=function(n){$(n).removeClass("show")},this.fix=function(){$(".b-about-block__aside, .b-about-block__content").addClass("fixed")},this.unfix=function(){$(".b-about-block__aside, .b-about-block__content").removeClass("fixed")}};n.dye(),a.init(),i.validateInit(),t.init(),s.init(),$(window).scroll(function(){n.dye(),t.paralax()}),$(document).click(function(n){var i=$(n.target);e.closeMenuAnywhere(i),o.closePopupAnywhere(i)}),$(".open-nav").click(function(){e.toggleMenu()}),$(".open-popup").click(function(){var n=$(this);o.openPopup(n)}),$(".close-popup").click(function(){o.closePopup()}),$("input, textarea").focus(function(){i.togglePlaceholder($(this))}),$(".b-about-block").waypoint(function(n){var e=this.element;0==$(e).index()?"down"==n?l.fix():"up"==n&&l.unfix():3==$(e).index()&&("down"==n?l.unfix():"up"==n&&l.fix())},{}),$(".b-about-block").waypoint(function(n){var e=this.element,o=$(e).prev();$(e).index();if("down"==n)l.show(e,n),l.hide(o,n);else if("up"==n){if(0==$(e).index())return!1;l.hide(e),l.show(o)}},{offset:"50%"}),$(".b-enroll-block").waypoint(function(n){var e=this.element;$(e).addClass("animate")},{offset:"80%"})});